= nav_link(**sidebar_menu.all_nav_link_params, html_options: { class: 'home' }) do
  = link_to sidebar_menu.link_to_href, **sidebar_menu.link_to_attributes do
    - if sidebar_menu.icon_or_image?
      .nav-icon-container
        - if sidebar_menu.image_path
          = image_tag(sidebar_menu.image_path, **sidebar_menu.image_html_options)
        - elsif sidebar_menu.sprite_icon
          = sprite_icon(sidebar_menu.sprite_icon)

    %span.nav-item-name{ **sidebar_menu.menu_name_html_options }
      = sidebar_menu.menu_name
    - if sidebar_menu.has_pill?
      %span.badge.badge-pill.count{ **sidebar_menu.pill_html_options }
        = number_with_delimiter(sidebar_menu.pill_count)

  %ul.sidebar-sub-level-items
    = nav_link(**sidebar_menu.all_nav_link_params, html_options: { class: 'fly-out-top-item' } ) do
      = link_to sidebar_menu.link_to_href do
        %strong.fly-out-top-item-name
          = sidebar_menu.menu_name
        - if sidebar_menu.has_pill?
          %span.badge.badge-pill.count.fly-out-badge{ **sidebar_menu.pill_html_options }
            = number_with_delimiter(sidebar_menu.pill_count)

    - if sidebar_menu.has_renderable_items?
      %li.divider.fly-out-top-item
      = render partial: 'shared/nav/sidebar_menu_item', collection: sidebar_menu.renderable_items

