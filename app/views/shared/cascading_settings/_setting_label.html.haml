- attribute = local_assigns.fetch(:attribute, nil)
- group = local_assigns.fetch(:group, nil)
- form = local_assigns.fetch(:form, nil)
- help_text = local_assigns.fetch(:help_text, nil)

- return unless attribute && group && form

- locked_method = "#{attribute}_locked?"

= form.label attribute, class: 'custom-control-label', aria: { disabled: group.namespace_settings.public_send(locked_method) } do
  %span.position-relative.gl-pr-6.gl-display-inline-flex
    = yield
    - if group.namespace_settings.public_send(locked_method)
      %button.position-absolute.gl-top-3.gl-right-0.gl-translate-y-n50.gl-cursor-default.btn.btn-default.btn-sm.gl-button.btn-default-tertiary.js-cascading-setting-lock-popover-target{ class: 'gl-p-1! gl-text-gray-600! gl-bg-transparent!',
        type: 'button',
        data: { locked_by_namespace: { full_name: 'test', path: '/foo/bar' }.to_json } }
        = sprite_icon('lock', size: 16)
  - if help_text
    %p.help-text
      = help_text
