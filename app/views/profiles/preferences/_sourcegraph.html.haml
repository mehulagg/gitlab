- return unless Gitlab::CurrentSettings.sourcegraph_enabled
- sourcegraph_url = Gitlab::CurrentSettings.sourcegraph_url

.col-sm-12
  %hr

.col-lg-4.profile-settings-sidebar
  %h4.prepend-top-0
    = _('Integrations')
  %p
    = _('Customize integrations with third party services.')
    = succeed '.' do
      = link_to _('Learn more'), help_page_path('user/profile/third-party.md', anchor: 'localization'), target: '_blank'
.col-lg-8
  %label.label-bold
    = s_('Preferences|Sourcegraph')
  = link_to icon('question-circle'), help_page_path('user/profile/sourcegraph.md'), target: '_blank'
  .form-group.form-check
    = f.check_box :sourcegraph_enabled, class: 'form-check-input'
    = f.label :sourcegraph_enabled, class: 'form-check-label' do
      - link_start = '<a href="%{url}">'.html_safe % { url: sourcegraph_url }
      - link_end = '</a>'.html_safe
      = s_('Preferences|Enable integrated code intelligence on code views, %{link_start}powered by Sourcegraph%{link_end}.').html_safe % { link_start: link_start, link_end: link_end }
    .form-text.text-muted
      = sourcegraph_help_message
