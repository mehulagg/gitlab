- expanded = local_assigns.fetch(:expanded)

%h4
  = _('Variables')
  = link_to icon('question-circle'), help_page_path('ci/variables/README', anchor: 'custom-environment-variables'), target: '_blank', rel: 'noopener noreferrer'

%button.btn.btn-default.js-settings-toggle{ type: 'button' }
  = expanded ? _('Collapse') : _('Expand')

%p
  = html_escape(_('Environment variables are applied to all project environments in this instance via the Runner. You can use environment variables for passwords, secret keys, etc. Make variables available to the running application by prepending the variable key with %{code_open}K8S_SECRET_%{code_close}. You can set variables to be:')) % { code_open: '<code>'.html_safe, code_close: '</code>'.html_safe }

%ul
  %li
    = html_escape(_('%{code_open}Protected%{code_close} to expose them to protected branches or tags only.')) % { code_open: '<code>'.html_safe, code_close: '</code>'.html_safe }
  %li
    = html_escape(_('%{code_open}Masked%{code_close} to prevent the values from being displayed in job logs (must match certain regexp requirements).')) % { code_open: '<code>'.html_safe, code_close: '</code>'.html_safe }

%p
  = link_to _('More information'), help_page_path('ci/variables/README', anchor: 'instance-level-cicd-environment-variables')
