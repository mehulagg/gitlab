query getAgents(
  $defaultBranchName: String!,
  $projectPath: ID!,
  $before: String,
  $after: String,
) {
  project(fullPath: $projectPath) {
    clusterAgents(first: 25, before: $before, after: $after) {
      nodes {
        id
        name
      }

      pageInfo {
        hasNextPage
        hasPreviousPage
        startCursor
        endCursor
      }
    }

    repository {
      tree(path: ".gitlab/agents", ref: $defaultBranchName) {
        trees {
          nodes {
            name
            path
            webPath
          }
        }
      }
    }
  }
}
