query readyToMergeQuery($projectPath: ID!, $iid: String!) {
  project(fullPath: $projectPath) {
    onlyAllowMergeIfPipelineSucceeds
    mergeRequestsFfOnlyEnabled
    squashReadOnly
    mergeRequest(iid: $iid) {
      autoMergeEnabled
      shouldRemoveSourceBranch
      defaultMergeCommitMessage
      defaultMergeCommitMessageWithDescription
      squash
      squashOnMerge
      availableAutoMergeStrategies
      hasCi
      mergeable
      mergeWhenPipelineSucceeds
      commitCount
      diffHeadSha
      userPermissions {
        removeSourceBranch
      }
      mergeTrainsCount
      targetBranch
      mergeError
      commitsWithoutMergeCommits {
        nodes {
          sha
          shortId
          title
          message
        }
      }
      pipelines(first: 1) {
        nodes {
          id
          status
          path
          active
        }
      }
    }
  }
}
