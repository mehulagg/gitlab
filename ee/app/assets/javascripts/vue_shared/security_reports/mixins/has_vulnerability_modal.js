import IssueModal from 'ee/vue_shared/security_reports/components/modal.vue';
import createStore from 'ee/vue_shared/security_reports/store/modules/vulnerability_modal';
import { mapActions, mapState } from 'vuex';

const storeModuleKey = 'vulnerabilityModal';

export default {
  components: {
    IssueModal,
  },
  created() {
    this.$store.registerModule(storeModuleKey, createStore());
  },
  computed: {
    ...mapState(storeModuleKey, {
      modal: state => state.modal,
      vulnerability: state => state.modal.vulnerability,
    }),
  },
  methods: {
    ...mapActions(storeModuleKey, [
      'openModal',
      'openDismissalCommentBox',
      'closeDismissalCommentBox',
    ]),
    handleIssueClick({ issue, status, vulnerability }) {
      this.openModal({ issue, status, vulnerability });
    },
  },
  provide() {
    return {
      handleIssueClick: this.handleIssueClick,
    };
  },
};
