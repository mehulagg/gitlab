# This is a GitLab CI/CD template that has the following metadata.
# For more information, see https://docs.gitlab.com/ee/development/cicd/templates.html.
.cicd-template-metadata:
    name: Pages/JBake
    description: This is a CI/CD template for <purpose> ...
    type: job
    group: group::your-group
    ignore_guideline_violation: true

# This template uses the java:8 docker image because there isn't any
# official JBake image at this moment
#
# JBake https://jbake.org/ is a Java based, open source, static site/blog generator for developers & designers
#
# This yml works with jBake 2.5.1
# Feel free to change JBAKE_VERSION version
#
# HowTo at: https://jorge.aguilera.gitlab.io/howtojbake/

image: java:8

variables:
  JBAKE_VERSION: 2.5.1

# We use SDKMan as tool for managing versions
before_script:
  - apt-get update -qq && apt-get install -y -qq unzip zip
  - curl -sSL https://get.sdkman.io | bash
  - echo sdkman_auto_answer=true > /root/.sdkman/etc/config
  - source /root/.sdkman/bin/sdkman-init.sh
  - sdk install jbake $JBAKE_VERSION < /dev/null
  - sdk use jbake $JBAKE_VERSION

# This build job produced the output directory of your site
pages:
  script:
    - jbake . public
  artifacts:
    paths:
      - public
